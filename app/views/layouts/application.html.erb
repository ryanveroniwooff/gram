<!DOCTYPE html>
<html>
<head>
  <title>Grammable</title>
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <link href='https://fonts.googleapis.com/css?family=Pacifico' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Josefin+Sans:400,100,300,600,700' rel='stylesheet' type='text/css'>

  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= csrf_meta_tags %>
</head>
<body>
<div class="top-nav">
  <div class="col-xs-offset-1 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3">
    <div class="brand pull-left">
      Grammable
    </div>
    <div class="add pull-right">
      <% if current_user %>
        Welcome, <%= current_user.email %>.
        <%= link_to "New Post", new_gram_path %>
        <%= link_to "Sign out", destroy_user_session_path, method: :delete %>
      <% else %>
        <%= link_to "Sign In", new_user_session_path %>
        <%= link_to "Sign Up", new_user_registration_path %>
      <% end %>
    </div>
    
  </div>
  <br class="clear-fix" />
</div>

<div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3">
  <% @grams.each do |gram| %>
    <div class="card">
      <div class="handle"><%= gram.user.email %></div>
      <%= image_tag gram.picture, class: 'img-responsive' %>
      <p>
        <%= gram.message %>
      </p>
      
      <div class="gram-actions pull-right">
        <% if current_user && current_user == gram.user %>
          <%= link_to 'Edit', edit_gram_path(gram), class: 'my-btn' %>
          <%= link_to 'Destroy', gram_path(gram), method: :delete, data: {confirm: 'Are you sure?'} %>      
        <% end %>
      </div>
      <br class="clear-fix" />
      <div class="comments">
        <h3>Comments</h3>
        <% gram.comments.each do |comment| %>
          <div class="comment">
            <span class="comment_handle">
              <%= comment.user.email %>
            </span>
            
            <%= comment.message %>
          </div>
        <% end %>
        <h4>Add a comment</h4>
        <%= simple_form_for Comment.new, url: gram_comments_path(gram) do |f| %>
          <%= f.input :message %>
          <%= f.submit 'Add Comment', class: 'my-btn' %>
        <% end %>
      </div>
    </div>
  <% end %>
</div>



<%= yield %>

</body>
</html>
